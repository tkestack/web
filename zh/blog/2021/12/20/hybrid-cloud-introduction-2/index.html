<!doctype html><html lang=zh class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.83.1"><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link rel="shortcut icon" href=/web/favicons/favicon.ico><link rel=apple-touch-icon href=/web/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/web/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/web/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/web/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/web/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/web/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/web/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/web/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/web/favicons/android-192x192.png sizes=192x192><title>TKEStack å®¹å™¨æ··åˆäº‘èƒ½åŠ›ä»‹ç»ï¼ˆ2ï¼‰ï¼šæ‰“ç ´ç½‘ç»œè¾¹ç•Œ | Tkestack</title><meta name=description content="ç”Ÿäº§çº§åˆ«å¤šé›†ç¾¤ç®¡ç†ç³»ç»Ÿ"><meta property="og:title" content="TKEStack å®¹å™¨æ··åˆäº‘èƒ½åŠ›ä»‹ç»ï¼ˆ2ï¼‰ï¼šæ‰“ç ´ç½‘ç»œè¾¹ç•Œ"><meta property="og:description" content="Author: LeoRyu
TKEStack æä¾›äº†å¤šé›†ç¾¤ç®¡ç†èƒ½åŠ›ï¼Œå…¶ä¸­å¯¼å…¥é›†ç¾¤åŠŸèƒ½é€šè¿‡æ¨é€æ¨¡å¼ç”± TKEStack ç®¡æ§é›†ç¾¤ï¼ˆglobal clusterï¼‰ç›´è¿ç¬¬ä¸‰æ–¹é›†ç¾¤çš„ api-server è¿›è€Œç»Ÿä¸€çº³ç®¡éƒ¨ç½²åœ¨ IDCï¼Œå…¬æœ‰äº‘æˆ–è¾¹ç¼˜çš„ç¬¬ä¸‰æ–¹é›†ç¾¤ã€‚ ä½†åœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œ ç®¡æ§é›†ç¾¤å’Œç¬¬ä¸‰æ–¹é›†ç¾¤ä¹‹é—´çš„ç›´è¿å¾€å¾€ä¼šå‡ºç°å¾ˆå¤šé˜»ç¢ï¼šæˆ–æ˜¯ä¸åœ¨åŒä¸€ä¸ªäºŒå±‚ç½‘ç»œä¸‹ï¼Œæˆ–æ˜¯ç¬¬ä¸‰æ–¹é›†ç¾¤åœ¨é˜²ç«å¢™/NATä¹‹åï¼Œæˆ–æ˜¯ç¬¬ä¸‰æ–¹é›†ç¾¤åœ¨ç½‘ç»œç­–ç•¥ä¸Šä¸å…è®¸æœ‰å…¥ç«™ç½‘ç»œä¼ è¾“ï¼Œåœ¨è¿™äº›åœºæ™¯ä¸‹, TKEStackéš¾ä»¥ç›´è¿ç¬¬ä¸‰æ–¹é›†ç¾¤ api-server, å¯¼å…¥é›†ç¾¤çš„èƒ½åŠ›æ— æ³•å‘æŒ¥ã€‚é’ˆå¯¹è¿™ä¸€é—®é¢˜æœ¬æ–‡å°†ä»‹ç»Â TKEStackÂ å¦‚ä½•å€ŸåŠ©è…¾è®¯äº‘åŸç”Ÿåˆ†å¸ƒå¼äº‘ä¸­å¿ƒæ³¨å†Œé›†ç¾¤çš„åŠŸèƒ½æ‰“ç ´ç½‘ç»œè¾¹ç•Œçš„é™åˆ¶ï¼Œå°†ç½‘ç»œç¯å¢ƒç›¸å¯¹éš”ç¦»çš„é›†ç¾¤çº³å…¥åˆ°Â TKEStackÂ çš„ç®¡æ§é¢ï¼Œè¿›è¡Œç»Ÿä¸€ç®¡æ§ã€‚
TKEStack çš„å¯¼å…¥é›†ç¾¤åŠŸèƒ½ å¼€æºç‰ˆ TKEStack çš„é›†ç¾¤ç®¡ç†ä¸­[1]å­˜åœ¨ä¸¤ç§é›†ç¾¤çš„æ¦‚å¿µï¼Œä¸€ç§æ˜¯ç‹¬ç«‹é›†ç¾¤ï¼Œå¦ä¸€ç§æ˜¯å¯¼å…¥é›†ç¾¤ã€‚
å…¶ä¸­ç‹¬ç«‹é›†ç¾¤éœ€è¦ç”¨æˆ·æä¾›å¯è¢« TKEStack è®¿é—®çš„ Linux æœºå™¨çš„è®¿é—®å‡­è¯ï¼ŒTKEStack å°†ä»¥ç”¨æˆ·æä¾›çš„æœºå™¨ä½œä¸ºåŸºç¡€è®¾æ–½ï¼Œä» 0 æ­å»ºå¯è¢« TKEStack ç®¡æ§çš„ K8s é›†ç¾¤ã€‚
å¯¼å…¥é›†ç¾¤åˆ™æ˜¯å°†ç”¨æˆ·çš„ç°å­˜é›†ç¾¤çº³å…¥åˆ° TKEStack çš„ç®¡æ§ä¹‹ä¸‹ï¼Œä½†éœ€è¦æ­¤é›†ç¾¤å¯ä»¥è¢« TKEStack è®¿é—®åˆ°ï¼ˆæ— éœ€è¢«å¯¼å…¥é›†ç¾¤å¯è®¿é—® TKEStackï¼‰ï¼Œç”¨æˆ·åœ¨æ»¡è¶³æ­¤æ¡ä»¶å‰æä¸‹å¯æä¾›è¢«å¯¼å…¥é›†ç¾¤çš„è®¿é—®å‡­è¯ï¼Œä¾¿å¯å°†é›†ç¾¤çº³å…¥åˆ° TKEStack ç®¡æ§è§†é‡å†…ã€‚
ä½†æ˜¯åœ¨ç°å®ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œè¢«å¯¼å…¥é›†ç¾¤æœ‰æå¤§çš„å¯èƒ½æ€§å¤„äºå¤–ç½‘æ— æ³•è®¿é—®çš„ç½‘ç»œç¯å¢ƒä¸­ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥å€ŸåŠ©è…¾è®¯äº‘çš„åˆ†å¸ƒå¼äº‘ä¸­å¿ƒæ¥æ‰“é€š TKEStack ä¸è¢«å¯¼å…¥é›†ç¾¤é—´çš„ç½‘ç»œè¾¹ç•Œé™åˆ¶ã€‚
æ‰“ç ´ç½‘ç»œè¾¹ç•Œ äº‘åŸç”Ÿåˆ†å¸ƒå¼äº‘ä¸­å¿ƒï¼ˆTencent Kubernetes Engine Distributed Cloud Centerï¼ŒTDCCï¼‰[2] æ˜¯è…¾è®¯é¢å‘å¤šäº‘å¤šé›†ç¾¤åœºæ™¯çš„åº”ç”¨ç®¡ç†å¹³å°ï¼Œæ”¯æŒç”¨æˆ·å°†äº‘åŸç”ŸåŒ–çš„åº”ç”¨æ‰©å±•åˆ°åˆ†å¸ƒå¼äº‘ï¼Œæ‰“é€šå…¬æœ‰äº‘ã€ç§æœ‰äº‘ã€è¾¹ç¼˜äº‘çš„ç•Œé™ï¼Œå°†å„ç§æˆç†Ÿçš„é›†ç¾¤ã€ç½‘ç»œã€å­˜å‚¨ã€å¾®æœåŠ¡ã€è¿ç»´ç­‰å…¬æœ‰äº‘äº§å“å’ŒæœåŠ¡äº¤ä»˜è‡³æ›´æ¥è¿‘ç”¨æˆ·å’Œæ•°æ®çš„ä½ç½®ï¼Œç¡®ä¿ä¸åŒäº‘åŸºç¡€è®¾æ–½ä¸‹æ‹¥æœ‰ä¸€è‡´çš„æ§åˆ¶å¹³é¢ï¼Œå¹¶ä¸”æä¾›å¯é æ€§ä¿è¯å’Œå®‰å…¨åˆè§„ä¿è¯ï¼Œæ»¡è¶³ä¼ä¸šç”¨æˆ·çš„å¤šäº‘ç®¡ç†ã€åº”ç”¨æ²»ç†ã€é«˜å¯ç”¨å®¹ç¾ç­‰åœºæ™¯è¯‰æ±‚ã€‚
ä¸‹é¢ç¬”è€…å°†æ¼”ç¤ºåœ¨å®¶åº­ç½‘ç»œç¯å¢ƒä¸‹ï¼ˆå¯è®¿é—®å…¬ç½‘ï¼‰ä½¿ç”¨ kind[3] åˆ›å»ºä¸€ä¸ª K8s é›†ç¾¤ï¼Œå¹¶å€ŸåŠ©åˆ†å¸ƒå¼äº‘ä¸­å¿ƒï¼Œå°†å…¶å¯¼å…¥ä¸€ä¸ªç§æœ‰äº‘ç½‘ç»œç¯å¢ƒä¸‹ï¼ˆå¯è®¿é—®å…¬ç½‘ï¼‰çš„ TKEStackã€‚ç”±äº TKEStack åœ¨ v1.8 release æ—¶äº‘åŸç”Ÿåˆ†å¸ƒå¼äº‘ä¸­å¿ƒè¿˜æœªä¸Šçº¿ï¼Œè¿™é‡Œéœ€è¦æˆ‘ä»¬ä½¿ç”¨ daily build ç‰ˆæœ¬è¿›è¡Œä½“éªŒï¼Œè¯¥åŠŸèƒ½çš„æ­£å¼å‘å¸ƒåˆ™éœ€è¦ç­‰åˆ°ç¨æ™šäº› TKEStack v1."><meta property="og:type" content="article"><meta property="og:url" content="/web/zh/blog/2021/12/20/hybrid-cloud-introduction-2/"><meta property="article:section" content="blog"><meta property="article:published_time" content="2021-12-20T00:00:00+00:00"><meta property="article:modified_time" content="2021-12-20T00:00:00+00:00"><meta property="og:site_name" content="Tkestack"><meta itemprop=name content="TKEStack å®¹å™¨æ··åˆäº‘èƒ½åŠ›ä»‹ç»ï¼ˆ2ï¼‰ï¼šæ‰“ç ´ç½‘ç»œè¾¹ç•Œ"><meta itemprop=description content="Author: LeoRyu
TKEStack æä¾›äº†å¤šé›†ç¾¤ç®¡ç†èƒ½åŠ›ï¼Œå…¶ä¸­å¯¼å…¥é›†ç¾¤åŠŸèƒ½é€šè¿‡æ¨é€æ¨¡å¼ç”± TKEStack ç®¡æ§é›†ç¾¤ï¼ˆglobal clusterï¼‰ç›´è¿ç¬¬ä¸‰æ–¹é›†ç¾¤çš„ api-server è¿›è€Œç»Ÿä¸€çº³ç®¡éƒ¨ç½²åœ¨ IDCï¼Œå…¬æœ‰äº‘æˆ–è¾¹ç¼˜çš„ç¬¬ä¸‰æ–¹é›†ç¾¤ã€‚ ä½†åœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œ ç®¡æ§é›†ç¾¤å’Œç¬¬ä¸‰æ–¹é›†ç¾¤ä¹‹é—´çš„ç›´è¿å¾€å¾€ä¼šå‡ºç°å¾ˆå¤šé˜»ç¢ï¼šæˆ–æ˜¯ä¸åœ¨åŒä¸€ä¸ªäºŒå±‚ç½‘ç»œä¸‹ï¼Œæˆ–æ˜¯ç¬¬ä¸‰æ–¹é›†ç¾¤åœ¨é˜²ç«å¢™/NATä¹‹åï¼Œæˆ–æ˜¯ç¬¬ä¸‰æ–¹é›†ç¾¤åœ¨ç½‘ç»œç­–ç•¥ä¸Šä¸å…è®¸æœ‰å…¥ç«™ç½‘ç»œä¼ è¾“ï¼Œåœ¨è¿™äº›åœºæ™¯ä¸‹, TKEStackéš¾ä»¥ç›´è¿ç¬¬ä¸‰æ–¹é›†ç¾¤ api-server, å¯¼å…¥é›†ç¾¤çš„èƒ½åŠ›æ— æ³•å‘æŒ¥ã€‚é’ˆå¯¹è¿™ä¸€é—®é¢˜æœ¬æ–‡å°†ä»‹ç»Â TKEStackÂ å¦‚ä½•å€ŸåŠ©è…¾è®¯äº‘åŸç”Ÿåˆ†å¸ƒå¼äº‘ä¸­å¿ƒæ³¨å†Œé›†ç¾¤çš„åŠŸèƒ½æ‰“ç ´ç½‘ç»œè¾¹ç•Œçš„é™åˆ¶ï¼Œå°†ç½‘ç»œç¯å¢ƒç›¸å¯¹éš”ç¦»çš„é›†ç¾¤çº³å…¥åˆ°Â TKEStackÂ çš„ç®¡æ§é¢ï¼Œè¿›è¡Œç»Ÿä¸€ç®¡æ§ã€‚
TKEStack çš„å¯¼å…¥é›†ç¾¤åŠŸèƒ½ å¼€æºç‰ˆ TKEStack çš„é›†ç¾¤ç®¡ç†ä¸­[1]å­˜åœ¨ä¸¤ç§é›†ç¾¤çš„æ¦‚å¿µï¼Œä¸€ç§æ˜¯ç‹¬ç«‹é›†ç¾¤ï¼Œå¦ä¸€ç§æ˜¯å¯¼å…¥é›†ç¾¤ã€‚
å…¶ä¸­ç‹¬ç«‹é›†ç¾¤éœ€è¦ç”¨æˆ·æä¾›å¯è¢« TKEStack è®¿é—®çš„ Linux æœºå™¨çš„è®¿é—®å‡­è¯ï¼ŒTKEStack å°†ä»¥ç”¨æˆ·æä¾›çš„æœºå™¨ä½œä¸ºåŸºç¡€è®¾æ–½ï¼Œä» 0 æ­å»ºå¯è¢« TKEStack ç®¡æ§çš„ K8s é›†ç¾¤ã€‚
å¯¼å…¥é›†ç¾¤åˆ™æ˜¯å°†ç”¨æˆ·çš„ç°å­˜é›†ç¾¤çº³å…¥åˆ° TKEStack çš„ç®¡æ§ä¹‹ä¸‹ï¼Œä½†éœ€è¦æ­¤é›†ç¾¤å¯ä»¥è¢« TKEStack è®¿é—®åˆ°ï¼ˆæ— éœ€è¢«å¯¼å…¥é›†ç¾¤å¯è®¿é—® TKEStackï¼‰ï¼Œç”¨æˆ·åœ¨æ»¡è¶³æ­¤æ¡ä»¶å‰æä¸‹å¯æä¾›è¢«å¯¼å…¥é›†ç¾¤çš„è®¿é—®å‡­è¯ï¼Œä¾¿å¯å°†é›†ç¾¤çº³å…¥åˆ° TKEStack ç®¡æ§è§†é‡å†…ã€‚
ä½†æ˜¯åœ¨ç°å®ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œè¢«å¯¼å…¥é›†ç¾¤æœ‰æå¤§çš„å¯èƒ½æ€§å¤„äºå¤–ç½‘æ— æ³•è®¿é—®çš„ç½‘ç»œç¯å¢ƒä¸­ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥å€ŸåŠ©è…¾è®¯äº‘çš„åˆ†å¸ƒå¼äº‘ä¸­å¿ƒæ¥æ‰“é€š TKEStack ä¸è¢«å¯¼å…¥é›†ç¾¤é—´çš„ç½‘ç»œè¾¹ç•Œé™åˆ¶ã€‚
æ‰“ç ´ç½‘ç»œè¾¹ç•Œ äº‘åŸç”Ÿåˆ†å¸ƒå¼äº‘ä¸­å¿ƒï¼ˆTencent Kubernetes Engine Distributed Cloud Centerï¼ŒTDCCï¼‰[2] æ˜¯è…¾è®¯é¢å‘å¤šäº‘å¤šé›†ç¾¤åœºæ™¯çš„åº”ç”¨ç®¡ç†å¹³å°ï¼Œæ”¯æŒç”¨æˆ·å°†äº‘åŸç”ŸåŒ–çš„åº”ç”¨æ‰©å±•åˆ°åˆ†å¸ƒå¼äº‘ï¼Œæ‰“é€šå…¬æœ‰äº‘ã€ç§æœ‰äº‘ã€è¾¹ç¼˜äº‘çš„ç•Œé™ï¼Œå°†å„ç§æˆç†Ÿçš„é›†ç¾¤ã€ç½‘ç»œã€å­˜å‚¨ã€å¾®æœåŠ¡ã€è¿ç»´ç­‰å…¬æœ‰äº‘äº§å“å’ŒæœåŠ¡äº¤ä»˜è‡³æ›´æ¥è¿‘ç”¨æˆ·å’Œæ•°æ®çš„ä½ç½®ï¼Œç¡®ä¿ä¸åŒäº‘åŸºç¡€è®¾æ–½ä¸‹æ‹¥æœ‰ä¸€è‡´çš„æ§åˆ¶å¹³é¢ï¼Œå¹¶ä¸”æä¾›å¯é æ€§ä¿è¯å’Œå®‰å…¨åˆè§„ä¿è¯ï¼Œæ»¡è¶³ä¼ä¸šç”¨æˆ·çš„å¤šäº‘ç®¡ç†ã€åº”ç”¨æ²»ç†ã€é«˜å¯ç”¨å®¹ç¾ç­‰åœºæ™¯è¯‰æ±‚ã€‚
ä¸‹é¢ç¬”è€…å°†æ¼”ç¤ºåœ¨å®¶åº­ç½‘ç»œç¯å¢ƒä¸‹ï¼ˆå¯è®¿é—®å…¬ç½‘ï¼‰ä½¿ç”¨ kind[3] åˆ›å»ºä¸€ä¸ª K8s é›†ç¾¤ï¼Œå¹¶å€ŸåŠ©åˆ†å¸ƒå¼äº‘ä¸­å¿ƒï¼Œå°†å…¶å¯¼å…¥ä¸€ä¸ªç§æœ‰äº‘ç½‘ç»œç¯å¢ƒä¸‹ï¼ˆå¯è®¿é—®å…¬ç½‘ï¼‰çš„ TKEStackã€‚ç”±äº TKEStack åœ¨ v1.8 release æ—¶äº‘åŸç”Ÿåˆ†å¸ƒå¼äº‘ä¸­å¿ƒè¿˜æœªä¸Šçº¿ï¼Œè¿™é‡Œéœ€è¦æˆ‘ä»¬ä½¿ç”¨ daily build ç‰ˆæœ¬è¿›è¡Œä½“éªŒï¼Œè¯¥åŠŸèƒ½çš„æ­£å¼å‘å¸ƒåˆ™éœ€è¦ç­‰åˆ°ç¨æ™šäº› TKEStack v1."><meta itemprop=datePublished content="2021-12-20T00:00:00+00:00"><meta itemprop=dateModified content="2021-12-20T00:00:00+00:00"><meta itemprop=wordCount content="354"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="TKEStack å®¹å™¨æ··åˆäº‘èƒ½åŠ›ä»‹ç»ï¼ˆ2ï¼‰ï¼šæ‰“ç ´ç½‘ç»œè¾¹ç•Œ"><meta name=twitter:description content="Author: LeoRyu
TKEStack æä¾›äº†å¤šé›†ç¾¤ç®¡ç†èƒ½åŠ›ï¼Œå…¶ä¸­å¯¼å…¥é›†ç¾¤åŠŸèƒ½é€šè¿‡æ¨é€æ¨¡å¼ç”± TKEStack ç®¡æ§é›†ç¾¤ï¼ˆglobal clusterï¼‰ç›´è¿ç¬¬ä¸‰æ–¹é›†ç¾¤çš„ api-server è¿›è€Œç»Ÿä¸€çº³ç®¡éƒ¨ç½²åœ¨ IDCï¼Œå…¬æœ‰äº‘æˆ–è¾¹ç¼˜çš„ç¬¬ä¸‰æ–¹é›†ç¾¤ã€‚ ä½†åœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œ ç®¡æ§é›†ç¾¤å’Œç¬¬ä¸‰æ–¹é›†ç¾¤ä¹‹é—´çš„ç›´è¿å¾€å¾€ä¼šå‡ºç°å¾ˆå¤šé˜»ç¢ï¼šæˆ–æ˜¯ä¸åœ¨åŒä¸€ä¸ªäºŒå±‚ç½‘ç»œä¸‹ï¼Œæˆ–æ˜¯ç¬¬ä¸‰æ–¹é›†ç¾¤åœ¨é˜²ç«å¢™/NATä¹‹åï¼Œæˆ–æ˜¯ç¬¬ä¸‰æ–¹é›†ç¾¤åœ¨ç½‘ç»œç­–ç•¥ä¸Šä¸å…è®¸æœ‰å…¥ç«™ç½‘ç»œä¼ è¾“ï¼Œåœ¨è¿™äº›åœºæ™¯ä¸‹, TKEStackéš¾ä»¥ç›´è¿ç¬¬ä¸‰æ–¹é›†ç¾¤ api-server, å¯¼å…¥é›†ç¾¤çš„èƒ½åŠ›æ— æ³•å‘æŒ¥ã€‚é’ˆå¯¹è¿™ä¸€é—®é¢˜æœ¬æ–‡å°†ä»‹ç»Â TKEStackÂ å¦‚ä½•å€ŸåŠ©è…¾è®¯äº‘åŸç”Ÿåˆ†å¸ƒå¼äº‘ä¸­å¿ƒæ³¨å†Œé›†ç¾¤çš„åŠŸèƒ½æ‰“ç ´ç½‘ç»œè¾¹ç•Œçš„é™åˆ¶ï¼Œå°†ç½‘ç»œç¯å¢ƒç›¸å¯¹éš”ç¦»çš„é›†ç¾¤çº³å…¥åˆ°Â TKEStackÂ çš„ç®¡æ§é¢ï¼Œè¿›è¡Œç»Ÿä¸€ç®¡æ§ã€‚
TKEStack çš„å¯¼å…¥é›†ç¾¤åŠŸèƒ½ å¼€æºç‰ˆ TKEStack çš„é›†ç¾¤ç®¡ç†ä¸­[1]å­˜åœ¨ä¸¤ç§é›†ç¾¤çš„æ¦‚å¿µï¼Œä¸€ç§æ˜¯ç‹¬ç«‹é›†ç¾¤ï¼Œå¦ä¸€ç§æ˜¯å¯¼å…¥é›†ç¾¤ã€‚
å…¶ä¸­ç‹¬ç«‹é›†ç¾¤éœ€è¦ç”¨æˆ·æä¾›å¯è¢« TKEStack è®¿é—®çš„ Linux æœºå™¨çš„è®¿é—®å‡­è¯ï¼ŒTKEStack å°†ä»¥ç”¨æˆ·æä¾›çš„æœºå™¨ä½œä¸ºåŸºç¡€è®¾æ–½ï¼Œä» 0 æ­å»ºå¯è¢« TKEStack ç®¡æ§çš„ K8s é›†ç¾¤ã€‚
å¯¼å…¥é›†ç¾¤åˆ™æ˜¯å°†ç”¨æˆ·çš„ç°å­˜é›†ç¾¤çº³å…¥åˆ° TKEStack çš„ç®¡æ§ä¹‹ä¸‹ï¼Œä½†éœ€è¦æ­¤é›†ç¾¤å¯ä»¥è¢« TKEStack è®¿é—®åˆ°ï¼ˆæ— éœ€è¢«å¯¼å…¥é›†ç¾¤å¯è®¿é—® TKEStackï¼‰ï¼Œç”¨æˆ·åœ¨æ»¡è¶³æ­¤æ¡ä»¶å‰æä¸‹å¯æä¾›è¢«å¯¼å…¥é›†ç¾¤çš„è®¿é—®å‡­è¯ï¼Œä¾¿å¯å°†é›†ç¾¤çº³å…¥åˆ° TKEStack ç®¡æ§è§†é‡å†…ã€‚
ä½†æ˜¯åœ¨ç°å®ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œè¢«å¯¼å…¥é›†ç¾¤æœ‰æå¤§çš„å¯èƒ½æ€§å¤„äºå¤–ç½‘æ— æ³•è®¿é—®çš„ç½‘ç»œç¯å¢ƒä¸­ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥å€ŸåŠ©è…¾è®¯äº‘çš„åˆ†å¸ƒå¼äº‘ä¸­å¿ƒæ¥æ‰“é€š TKEStack ä¸è¢«å¯¼å…¥é›†ç¾¤é—´çš„ç½‘ç»œè¾¹ç•Œé™åˆ¶ã€‚
æ‰“ç ´ç½‘ç»œè¾¹ç•Œ äº‘åŸç”Ÿåˆ†å¸ƒå¼äº‘ä¸­å¿ƒï¼ˆTencent Kubernetes Engine Distributed Cloud Centerï¼ŒTDCCï¼‰[2] æ˜¯è…¾è®¯é¢å‘å¤šäº‘å¤šé›†ç¾¤åœºæ™¯çš„åº”ç”¨ç®¡ç†å¹³å°ï¼Œæ”¯æŒç”¨æˆ·å°†äº‘åŸç”ŸåŒ–çš„åº”ç”¨æ‰©å±•åˆ°åˆ†å¸ƒå¼äº‘ï¼Œæ‰“é€šå…¬æœ‰äº‘ã€ç§æœ‰äº‘ã€è¾¹ç¼˜äº‘çš„ç•Œé™ï¼Œå°†å„ç§æˆç†Ÿçš„é›†ç¾¤ã€ç½‘ç»œã€å­˜å‚¨ã€å¾®æœåŠ¡ã€è¿ç»´ç­‰å…¬æœ‰äº‘äº§å“å’ŒæœåŠ¡äº¤ä»˜è‡³æ›´æ¥è¿‘ç”¨æˆ·å’Œæ•°æ®çš„ä½ç½®ï¼Œç¡®ä¿ä¸åŒäº‘åŸºç¡€è®¾æ–½ä¸‹æ‹¥æœ‰ä¸€è‡´çš„æ§åˆ¶å¹³é¢ï¼Œå¹¶ä¸”æä¾›å¯é æ€§ä¿è¯å’Œå®‰å…¨åˆè§„ä¿è¯ï¼Œæ»¡è¶³ä¼ä¸šç”¨æˆ·çš„å¤šäº‘ç®¡ç†ã€åº”ç”¨æ²»ç†ã€é«˜å¯ç”¨å®¹ç¾ç­‰åœºæ™¯è¯‰æ±‚ã€‚
ä¸‹é¢ç¬”è€…å°†æ¼”ç¤ºåœ¨å®¶åº­ç½‘ç»œç¯å¢ƒä¸‹ï¼ˆå¯è®¿é—®å…¬ç½‘ï¼‰ä½¿ç”¨ kind[3] åˆ›å»ºä¸€ä¸ª K8s é›†ç¾¤ï¼Œå¹¶å€ŸåŠ©åˆ†å¸ƒå¼äº‘ä¸­å¿ƒï¼Œå°†å…¶å¯¼å…¥ä¸€ä¸ªç§æœ‰äº‘ç½‘ç»œç¯å¢ƒä¸‹ï¼ˆå¯è®¿é—®å…¬ç½‘ï¼‰çš„ TKEStackã€‚ç”±äº TKEStack åœ¨ v1.8 release æ—¶äº‘åŸç”Ÿåˆ†å¸ƒå¼äº‘ä¸­å¿ƒè¿˜æœªä¸Šçº¿ï¼Œè¿™é‡Œéœ€è¦æˆ‘ä»¬ä½¿ç”¨ daily build ç‰ˆæœ¬è¿›è¡Œä½“éªŒï¼Œè¯¥åŠŸèƒ½çš„æ­£å¼å‘å¸ƒåˆ™éœ€è¦ç­‰åˆ°ç¨æ™šäº› TKEStack v1."><link rel=preload href=/web/scss/main.min.f3f5e11928ea652eef8f11ab959efa477bbd1a85923ff5e0245c83fe74bd312a.css as=style><link href=/web/scss/main.min.f3f5e11928ea652eef8f11ab959efa477bbd1a85923ff5e0245c83fe74bd312a.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script></head><body class="td-page td-blog"><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/web/zh/><span class=navbar-logo></span><span class="text-uppercase font-weight-bold">Tkestack</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/web/zh/docs/><span>Docs</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/web/zh/blog/><span>Blog</span></a></li><li class="nav-item dropdown d-none d-lg-block"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>ä¸­æ–‡ Chinese</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/web/>English</a></div></li></ul></div><div class="navbar-nav d-none d-lg-block"></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="collapse td-sidebar-nav" id=td-section-nav><div class="nav-item dropdown d-block d-lg-none"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>ä¸­æ–‡ Chinese</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/web/>English</a></div></div><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-webzhblog-li><a href=/web/zh/blog/ title="TKEStack åšå®¢" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section tree-root" id=m-webzhblog><span>åšå®¢</span></a><ul class="pr-md-3 ul-1"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-webzhblog20220318tkestack-casbin-authz-li><a href=/web/zh/blog/2022/03/18/tkestack-casbin-authz/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-webzhblog20220318tkestack-casbin-authz><span>TKEStackæˆæƒé“¾è·¯æºç è§£æ</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-webzhblog20220223tkestack-installer-chart-li><a href=/web/zh/blog/2022/02/23/tkestack-installer-chart/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-webzhblog20220223tkestack-installer-chart><span>åŸç”Ÿk8sé›†ç¾¤ä¸Šé€šè¿‡chartå®‰è£…tke-authã€tke-platformã€tke-gateway</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-webzhblog20220104tkestack-ldap-li><a href=/web/zh/blog/2022/01/04/tkestack-ldap/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-webzhblog20220104tkestack-ldap><span>TKEStack é›†æˆLDAP</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-webzhblog20211220hybrid-cloud-introduction-2-li><a href=/web/zh/blog/2021/12/20/hybrid-cloud-introduction-2/ class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__page" id=m-webzhblog20211220hybrid-cloud-introduction-2><span class=td-sidebar-nav-active-item>TKEStack å®¹å™¨æ··åˆäº‘èƒ½åŠ›ä»‹ç»ï¼ˆ2ï¼‰ï¼šæ‰“ç ´ç½‘ç»œè¾¹ç•Œ</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-webzhblog20211218tkestack-auth-li><a href=/web/zh/blog/2021/12/18/tkestack-auth/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-webzhblog20211218tkestack-auth><span>TKEStack ä¸­çš„è®¤è¯ä¸é‰´æƒ</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-webzhblog20210901container-runtime-migraion-li><a href=/web/zh/blog/2021/09/01/container-runtime-migraion/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-webzhblog20210901container-runtime-migraion><span>TKEStack é›†ç¾¤å®¹å™¨è¿è¡Œæ—¶è¿ç§»</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-webzhblog20210802hybrid-cloud-introduction-1-li><a href=/web/zh/blog/2021/08/02/hybrid-cloud-introduction-1/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-webzhblog20210802hybrid-cloud-introduction-1><span>TKEStack å®¹å™¨æ··åˆäº‘èƒ½åŠ›ä»‹ç»ï¼ˆ1ï¼‰ï¼šç»Ÿä¸€åŸºçŸ³</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-webzhblog20210609tkestack-indtroduction-2021-li><a href=/web/zh/blog/2021/06/09/tkestack-indtroduction-2021/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-webzhblog20210609tkestack-indtroduction-2021><span>è…¾è®¯å¼€æºå®¹å™¨äº‘å¹³å° TKEStack ä»‹ç»</span></a></li></ul></li></ul></nav></div></div><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/tkestack/web/edit/master/content/zh/blog/2021-12-20-TKEStack%e5%ae%b9%e5%99%a8%e6%b7%b7%e5%90%88%e4%ba%91%e8%83%bd%e5%8a%9b%e4%bb%8b%e7%bb%8d-2/index.md target=_blank><i class="fa fa-edit fa-fw"></i> ç¼–è¾‘æ­¤é¡µ</a>
<a href="https://github.com/tkestack/web/new/master/content/zh/blog/2021-12-20-TKEStack%e5%ae%b9%e5%99%a8%e6%b7%b7%e5%90%88%e4%ba%91%e8%83%bd%e5%8a%9b%e4%bb%8b%e7%bb%8d-2/index.md?filename=change-me.md&value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" target=_blank><i class="fa fa-edit fa-fw"></i> æ·»åŠ å­é¡µé¢</a>
<a href="https://github.com/tkestack/web/issues/new?title=TKEStack%20%e5%ae%b9%e5%99%a8%e6%b7%b7%e5%90%88%e4%ba%91%e8%83%bd%e5%8a%9b%e4%bb%8b%e7%bb%8d%ef%bc%882%ef%bc%89%ef%bc%9a%e6%89%93%e7%a0%b4%e7%bd%91%e7%bb%9c%e8%be%b9%e7%95%8c" target=_blank><i class="fab fa-github fa-fw"></i> æäº¤æ–‡æ¡£é—®é¢˜</a>
<a id=print href=/web/zh/blog/_print/><i class="fa fa-print fa-fw"></i> æ•´èŠ‚æ‰“å°</a></div><nav id=TableOfContents><ul><li><a href=#tkestack-çš„å¯¼å…¥é›†ç¾¤åŠŸèƒ½>TKEStack çš„å¯¼å…¥é›†ç¾¤åŠŸèƒ½</a></li><li><a href=#æ‰“ç ´ç½‘ç»œè¾¹ç•Œ>æ‰“ç ´ç½‘ç»œè¾¹ç•Œ</a><ul><li><a href=#åˆ›å»º-kind-é›†ç¾¤>åˆ›å»º kind é›†ç¾¤</a></li><li><a href=#æ³¨å†Œé›†ç¾¤åˆ°åˆ†å¸ƒå¼äº‘ä¸­å¿ƒ>æ³¨å†Œé›†ç¾¤åˆ°åˆ†å¸ƒå¼äº‘ä¸­å¿ƒ</a></li><li><a href=#å¯¼å…¥é›†ç¾¤åˆ°-tkestack>å¯¼å…¥é›†ç¾¤åˆ° TKEStack</a></li></ul></li><li><a href=#åŸç†>åŸç†</a></li><li><a href=#åŠ å…¥æˆ‘ä»¬>åŠ å…¥æˆ‘ä»¬</a></li><li><a href=#å‚è€ƒèµ„æ–™>å‚è€ƒèµ„æ–™</a></li></ul></nav></div><main class="col-12 col-md-9 col-xl-8 pl-md-5 pr-md-4" role=main><div class=td-content><h1>TKEStack å®¹å™¨æ··åˆäº‘èƒ½åŠ›ä»‹ç»ï¼ˆ2ï¼‰ï¼šæ‰“ç ´ç½‘ç»œè¾¹ç•Œ</h1><div class="td-byline mb-4"><time datetime=2021-12-20 class=text-muted>2021.12.20</time></div><p><strong>Author</strong>: LeoRyu</p><p><em>TKEStack æä¾›äº†å¤šé›†ç¾¤ç®¡ç†èƒ½åŠ›ï¼Œå…¶ä¸­å¯¼å…¥é›†ç¾¤åŠŸèƒ½é€šè¿‡æ¨é€æ¨¡å¼ç”± TKEStack ç®¡æ§é›†ç¾¤ï¼ˆglobal clusterï¼‰ç›´è¿ç¬¬ä¸‰æ–¹é›†ç¾¤çš„ api-server è¿›è€Œç»Ÿä¸€çº³ç®¡éƒ¨ç½²åœ¨ IDCï¼Œå…¬æœ‰äº‘æˆ–è¾¹ç¼˜çš„ç¬¬ä¸‰æ–¹é›†ç¾¤ã€‚ ä½†åœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œ ç®¡æ§é›†ç¾¤å’Œç¬¬ä¸‰æ–¹é›†ç¾¤ä¹‹é—´çš„ç›´è¿å¾€å¾€ä¼šå‡ºç°å¾ˆå¤šé˜»ç¢ï¼šæˆ–æ˜¯ä¸åœ¨åŒä¸€ä¸ªäºŒå±‚ç½‘ç»œä¸‹ï¼Œæˆ–æ˜¯ç¬¬ä¸‰æ–¹é›†ç¾¤åœ¨é˜²ç«å¢™/NATä¹‹åï¼Œæˆ–æ˜¯ç¬¬ä¸‰æ–¹é›†ç¾¤åœ¨ç½‘ç»œç­–ç•¥ä¸Šä¸å…è®¸æœ‰å…¥ç«™ç½‘ç»œä¼ è¾“ï¼Œåœ¨è¿™äº›åœºæ™¯ä¸‹, TKEStackéš¾ä»¥ç›´è¿ç¬¬ä¸‰æ–¹é›†ç¾¤ api-server, å¯¼å…¥é›†ç¾¤çš„èƒ½åŠ›æ— æ³•å‘æŒ¥ã€‚é’ˆå¯¹è¿™ä¸€é—®é¢˜æœ¬æ–‡å°†ä»‹ç»Â TKEStackÂ å¦‚ä½•å€ŸåŠ©è…¾è®¯äº‘åŸç”Ÿåˆ†å¸ƒå¼äº‘ä¸­å¿ƒæ³¨å†Œé›†ç¾¤çš„åŠŸèƒ½æ‰“ç ´ç½‘ç»œè¾¹ç•Œçš„é™åˆ¶ï¼Œå°†ç½‘ç»œç¯å¢ƒç›¸å¯¹éš”ç¦»çš„é›†ç¾¤çº³å…¥åˆ°Â TKEStackÂ çš„ç®¡æ§é¢ï¼Œè¿›è¡Œç»Ÿä¸€ç®¡æ§ã€‚</em></p><h2 id=tkestack-çš„å¯¼å…¥é›†ç¾¤åŠŸèƒ½>TKEStack çš„å¯¼å…¥é›†ç¾¤åŠŸèƒ½</h2><p>å¼€æºç‰ˆ TKEStack çš„é›†ç¾¤ç®¡ç†ä¸­<sup>[1]</sup>å­˜åœ¨ä¸¤ç§é›†ç¾¤çš„æ¦‚å¿µï¼Œä¸€ç§æ˜¯<code>ç‹¬ç«‹é›†ç¾¤</code>ï¼Œå¦ä¸€ç§æ˜¯<code>å¯¼å…¥é›†ç¾¤</code>ã€‚</p><p>å…¶ä¸­<code>ç‹¬ç«‹é›†ç¾¤</code>éœ€è¦ç”¨æˆ·æä¾›å¯è¢« TKEStack è®¿é—®çš„ Linux æœºå™¨çš„è®¿é—®å‡­è¯ï¼ŒTKEStack å°†ä»¥ç”¨æˆ·æä¾›çš„æœºå™¨ä½œä¸ºåŸºç¡€è®¾æ–½ï¼Œä» 0 æ­å»ºå¯è¢« TKEStack ç®¡æ§çš„ K8s é›†ç¾¤ã€‚</p><img alt=ç‹¬ç«‹é›†ç¾¤ width=100% src=baremetal-cluster.png><p><code>å¯¼å…¥é›†ç¾¤</code>åˆ™æ˜¯å°†ç”¨æˆ·çš„ç°å­˜é›†ç¾¤çº³å…¥åˆ° TKEStack çš„ç®¡æ§ä¹‹ä¸‹ï¼Œä½†éœ€è¦æ­¤é›†ç¾¤å¯ä»¥è¢« TKEStack è®¿é—®åˆ°ï¼ˆæ— éœ€è¢«å¯¼å…¥é›†ç¾¤å¯è®¿é—® TKEStackï¼‰ï¼Œç”¨æˆ·åœ¨æ»¡è¶³æ­¤æ¡ä»¶å‰æä¸‹å¯æä¾›è¢«å¯¼å…¥é›†ç¾¤çš„è®¿é—®å‡­è¯ï¼Œä¾¿å¯å°†é›†ç¾¤çº³å…¥åˆ° TKEStack ç®¡æ§è§†é‡å†…ã€‚</p><img alt=å¯¼å…¥é›†ç¾¤ width=100% src=import-cluster.png><p>ä½†æ˜¯åœ¨ç°å®ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œè¢«å¯¼å…¥é›†ç¾¤æœ‰æå¤§çš„å¯èƒ½æ€§å¤„äºå¤–ç½‘æ— æ³•è®¿é—®çš„ç½‘ç»œç¯å¢ƒä¸­ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥å€ŸåŠ©è…¾è®¯äº‘çš„åˆ†å¸ƒå¼äº‘ä¸­å¿ƒæ¥æ‰“é€š TKEStack ä¸è¢«å¯¼å…¥é›†ç¾¤é—´çš„ç½‘ç»œè¾¹ç•Œé™åˆ¶ã€‚</p><h2 id=æ‰“ç ´ç½‘ç»œè¾¹ç•Œ>æ‰“ç ´ç½‘ç»œè¾¹ç•Œ</h2><p>äº‘åŸç”Ÿåˆ†å¸ƒå¼äº‘ä¸­å¿ƒï¼ˆTencent Kubernetes Engine Distributed Cloud Centerï¼ŒTDCCï¼‰<sup>[2]</sup> æ˜¯è…¾è®¯é¢å‘å¤šäº‘å¤šé›†ç¾¤åœºæ™¯çš„åº”ç”¨ç®¡ç†å¹³å°ï¼Œæ”¯æŒç”¨æˆ·å°†äº‘åŸç”ŸåŒ–çš„åº”ç”¨æ‰©å±•åˆ°åˆ†å¸ƒå¼äº‘ï¼Œæ‰“é€šå…¬æœ‰äº‘ã€ç§æœ‰äº‘ã€è¾¹ç¼˜äº‘çš„ç•Œé™ï¼Œå°†å„ç§æˆç†Ÿçš„é›†ç¾¤ã€ç½‘ç»œã€å­˜å‚¨ã€å¾®æœåŠ¡ã€è¿ç»´ç­‰å…¬æœ‰äº‘äº§å“å’ŒæœåŠ¡äº¤ä»˜è‡³æ›´æ¥è¿‘ç”¨æˆ·å’Œæ•°æ®çš„ä½ç½®ï¼Œç¡®ä¿ä¸åŒäº‘åŸºç¡€è®¾æ–½ä¸‹æ‹¥æœ‰ä¸€è‡´çš„æ§åˆ¶å¹³é¢ï¼Œå¹¶ä¸”æä¾›å¯é æ€§ä¿è¯å’Œå®‰å…¨åˆè§„ä¿è¯ï¼Œæ»¡è¶³ä¼ä¸šç”¨æˆ·çš„å¤šäº‘ç®¡ç†ã€åº”ç”¨æ²»ç†ã€é«˜å¯ç”¨å®¹ç¾ç­‰åœºæ™¯è¯‰æ±‚ã€‚</p><p>ä¸‹é¢ç¬”è€…å°†æ¼”ç¤ºåœ¨å®¶åº­ç½‘ç»œç¯å¢ƒä¸‹ï¼ˆå¯è®¿é—®å…¬ç½‘ï¼‰ä½¿ç”¨ kind<sup>[3]</sup> åˆ›å»ºä¸€ä¸ª K8s é›†ç¾¤ï¼Œå¹¶å€ŸåŠ©åˆ†å¸ƒå¼äº‘ä¸­å¿ƒï¼Œå°†å…¶å¯¼å…¥ä¸€ä¸ªç§æœ‰äº‘ç½‘ç»œç¯å¢ƒä¸‹ï¼ˆå¯è®¿é—®å…¬ç½‘ï¼‰çš„ TKEStackã€‚ç”±äº TKEStack åœ¨ v1.8 release æ—¶äº‘åŸç”Ÿåˆ†å¸ƒå¼äº‘ä¸­å¿ƒè¿˜æœªä¸Šçº¿ï¼Œè¿™é‡Œéœ€è¦æˆ‘ä»¬ä½¿ç”¨ daily build ç‰ˆæœ¬è¿›è¡Œä½“éªŒï¼Œè¯¥åŠŸèƒ½çš„æ­£å¼å‘å¸ƒåˆ™éœ€è¦ç­‰åˆ°ç¨æ™šäº› TKEStack v1.9.0 å‘å¸ƒï¼Œdaily build ç‰ˆæœ¬ä¸‹è½½å¯å‚è€ƒä»¥ä¸‹å‘½ä»¤ï¼š</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#000>version</span><span style=color:#ce5c00;font-weight:700>=</span>310e18e0d696ee0aa57dfe38655b99726eab9f5c <span style=color:#ce5c00;font-weight:700>&amp;&amp;</span> wget https://tke-release-1251707795.cos.ap-guangzhou.myqcloud.com/tke-installer-linux-amd64-<span style=color:#000>$version</span>.run<span style=color:#ce5c00;font-weight:700>{</span>,.sha256<span style=color:#ce5c00;font-weight:700>}</span> <span style=color:#ce5c00;font-weight:700>&amp;&amp;</span> sha256sum --check --status tke-installer-linux-amd64-<span style=color:#000>$version</span>.run.sha256 <span style=color:#ce5c00;font-weight:700>&amp;&amp;</span> chmod +x tke-installer-linux-amd64-<span style=color:#000>$version</span>.run <span style=color:#ce5c00;font-weight:700>&amp;&amp;</span> ./tke-installer-linux-amd64-<span style=color:#000>$version</span>.run
</code></pre></div><h3 id=åˆ›å»º-kind-é›†ç¾¤>åˆ›å»º kind é›†ç¾¤</h3><p>è¿™é‡Œç¬”è€…åœ¨è‡ªå·±çš„è™šæ‹Ÿæœºä¸Šä½¿ç”¨ kind åˆ›å»ºä¸€ä¸ªé›†ç¾¤ï¼Œé¦–å…ˆæ˜¯å®‰è£… kindï¼š</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>curl -Lo ./kind https://kind.sigs.k8s.io/dl/v0.11.1/kind-linux-amd64
chmod +x ./kind
mv kind /usr/bin/
</code></pre></div><p>ç„¶åæˆ‘ä»¬æ‰§è¡Œ kind çš„åˆ›å»ºé›†ç¾¤å‘½ä»¤ï¼š</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>kind create cluster
</code></pre></div><p>å¦‚æœä¸å‡ºæ„å¤–æˆ‘ä»¬å°†åœ¨ç­‰å¾…ä¸€æ®µæ—¶é—´åå¾—åˆ°ä»¥ä¸‹ç»“æœï¼š</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>Creating cluster <span style=color:#4e9a06>&#34;kind&#34;</span> ...
 âœ“ Ensuring node image <span style=color:#ce5c00;font-weight:700>(</span>kindest/node:v1.21.1<span style=color:#ce5c00;font-weight:700>)</span> ğŸ–¼ 
 âœ“ Preparing nodes ğŸ“¦  
 âœ“ Writing configuration ğŸ“œ 
 âœ“ Starting control-plane ğŸ•¹ï¸ 
 âœ“ Installing CNI ğŸ”Œ 
 âœ“ Installing StorageClass ğŸ’¾ 
Set kubectl context to <span style=color:#4e9a06>&#34;kind-kind&#34;</span>
You can now use your cluster with:

kubectl cluster-info --context kind-kind

Not sure what to <span style=color:#204a87;font-weight:700>do</span> next? ğŸ˜…  Check out https://kind.sigs.k8s.io/docs/user/quick-start/
</code></pre></div><p>ä¸‹é¢å¯ä»¥ä½¿ç”¨ kubectl æ¥ç¡®è®¤ä¸€ä¸‹é›†ç¾¤æ˜¯å¦åœ¨æ­£å¸¸è¿è¡Œï¼Œè¿™é‡Œæˆ‘ä»¬å°±å®Œæˆäº† kind é›†ç¾¤çš„åˆ›å»ºå·¥ä½œã€‚å¦‚æœä½ çš„æœºå™¨ä¸Šæ²¡æœ‰ kubectl å¯ä»¥å‚è€ƒ<a href=https://kubernetes.io/docs/tasks/tools/install-kubectl-linux/>Install and Set Up kubectl on Linux
</a>è¿›è¡Œå®‰è£…ã€‚</p><h3 id=æ³¨å†Œé›†ç¾¤åˆ°åˆ†å¸ƒå¼äº‘ä¸­å¿ƒ>æ³¨å†Œé›†ç¾¤åˆ°åˆ†å¸ƒå¼äº‘ä¸­å¿ƒ</h3><p>è®¿é—®è…¾è®¯äº‘çš„<a href=https://console.cloud.tencent.com/tdcc/cluster>åˆ†å¸ƒå¼äº‘ä¸­å¿ƒä¸»é¡µ</a>ï¼Œé€‰æ‹©æ³¨å†Œé›†ç¾¤æŒ‰é’®ã€‚</p><img alt=æ³¨å†Œé›†ç¾¤1 width=100% src=register-cluster-1.png><p>è¿™é‡Œç”±äºæˆ‘ä»¬æ˜¯é€šè¿‡ kind åˆ›å»ºçš„é›†ç¾¤å¹¶é TKEï¼Œæ‰€ä»¥æ³¨æ„é€‰æ‹©é TKE é›†ç¾¤ã€‚</p><img alt=æ³¨å†Œé›†ç¾¤2 width=100% src=register-cluster-2.png><p>æ³¨å†Œé›†ç¾¤åˆ›å»ºæˆåŠŸåæ”¹é›†ç¾¤å°†å¤„äºç­‰å¾…æ³¨å†Œçš„çŠ¶æ€ï¼Œç‚¹å‡»æŸ¥çœ‹æ³¨å†Œå‘½ä»¤ã€‚</p><img alt=æ³¨å†Œé›†ç¾¤3 width=100% src=register-cluster-3.png><p>ç”±äºæˆ‘ä»¬çš„ kind é›†ç¾¤æ— æ³•æ— æ³•é€šè¿‡å†…å¤–ä¸åˆ†å¸ƒå¼äº‘ä¸­å¿ƒé€šä¿¡ï¼Œæ³¨æ„é€‰æ‹©å¤–ç½‘è®¿é—®ã€‚</p><img alt=æ³¨å†Œé›†ç¾¤4 width=100% src=register-cluster-4.png><p>æ ¹æ®æç¤ºå°†<code>agent.yaml</code>ä¸‹è½½ä¸‹æ¥ç„¶åé€šè¿‡ kubectl éƒ¨ç½²åˆ° kind é›†ç¾¤ï¼š</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>kubectl apply -f agent.yaml
</code></pre></div><p>å¦‚æœé¡ºåˆ©æˆ‘ä»¬å°†ä¼šå¾—åˆ°ä»¥ä¸‹åé¦ˆï¼š</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>namespace/clusternet-system created
serviceaccount/clusternet-agent created
serviceaccount/clusternet-app-deployer created
deployment.apps/clusternet-agent created
clusterrole.rbac.authorization.k8s.io/clusternet:app:deployer created
clusterrolebinding.rbac.authorization.k8s.io/clusternet:app:deployer created
secret/clusternet-agent-cluster-registration created
</code></pre></div><p>æ­¤æ—¶å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤ç¡®è®¤ä¸‹ agent ç›¸å…³ pod æ˜¯å¦æ­£å¸¸å·¥ä½œï¼š</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>kubectl get pod -n clusternet-system
</code></pre></div><p>å¦‚æœæ­£å¸¸æˆ‘ä»¬åº”å½“ä¼šå¾—åˆ°ç±»ä¼¼ä¸‹é¢çš„åé¦ˆï¼š</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>NAMESPACE            NAME                                         READY   STATUS    RESTARTS   AGE
clusternet-system    clusternet-agent-6754cc97bb-dk6r4            1/1     Running   <span style=color:#0000cf;font-weight:700>0</span>          8s
clusternet-system    clusternet-agent-6754cc97bb-sbpzg            1/1     Running   <span style=color:#0000cf;font-weight:700>0</span>          8s
clusternet-system    clusternet-agent-6754cc97bb-zfblp            1/1     Running   <span style=color:#0000cf;font-weight:700>0</span>          8s
</code></pre></div><p>å†æ£€æŸ¥åˆ†å¸ƒå¼äº‘ä¸­å¿ƒé¦–é¡µæˆ‘ä»¬å°†å‘ç° kind é›†ç¾¤å·²ç»æˆåŠŸæ³¨å†Œäº†è¿›æ¥ã€‚</p><h3 id=å¯¼å…¥é›†ç¾¤åˆ°-tkestack>å¯¼å…¥é›†ç¾¤åˆ° TKEStack</h3><p>ä¸‹é¢æˆ‘ä»¬å°†æŠŠ kind é›†ç¾¤å¯¼å…¥åˆ° TKEStack ä¸­ï¼Œé¦–å…ˆä»åˆ†å¸ƒå¼äº‘ä¸­å¿ƒå°†é›†ç¾¤çš„è®¿é—®å‡­è¯ä¸‹è½½ä¸‹æ¥ã€‚</p><img alt=æ³¨å†Œé›†ç¾¤5 width=100% src=register-cluster-5.png>
<img alt=æ³¨å†Œé›†ç¾¤6 width=100% src=register-cluster-6.png><p>ç„¶åä½¿ç”¨æ­¤å‡­è¯ä¾¿å¯å°† kind é›†ç¾¤å¯¼å…¥åˆ° TKEStack ä¸­ã€‚</p><img alt=æ³¨å†Œé›†ç¾¤7 width=100% src=register-cluster-7.png>
<img alt=æ³¨å†Œé›†ç¾¤8 width=100% src=register-cluster-8.png>
<img alt=æ³¨å†Œé›†ç¾¤9 width=100% src=register-cluster-9.png><h2 id=åŸç†>åŸç†</h2><p>è…¾è®¯äº‘åˆ†å¸ƒå¼äº‘ä¸­å¿ƒçš„æ ¸å¿ƒåŠŸèƒ½ç”± Clusternet<sup>[4]</sup> æä¾›ï¼Œè¯¥é¡¹ç›®å·²ç»å¼€æºï¼Œå¯ä»¥åœ¨ <a href=https://github.com/clusternet/clusternet>https://github.com/clusternet/clusternet</a> ä»“åº“ä¸‹æŸ¥çœ‹ä»£ç ã€‚</p><p>Clusternet çš„æ ¸å¿ƒèƒ½åŠ›é€šè¿‡<code>clusternet-hub</code>å’Œ<code>clusternet-agent</code>ä¸¤ä¸ªç»„ä»¶å®ç°ï¼Œ<code>clusternet-hub</code>çš„è§’è‰²ç±»ä¼¼ä¸€ä¸ªç”µæ’æ¿ï¼Œä»¥ aggregated apiserver<sup>[5]</sup> å½¢å¼éƒ¨ç½²åœ¨çˆ¶é›†ç¾¤ä¸­ç­‰å¾…ç€å­é›†ç¾¤è¢«æ¥å…¥è¿›æ¥ï¼›<code>clusternet-agent</code>åˆ™åœ¨å­é›†ç¾¤ä¸­å……å½“ä¸€ä¸ªæ´¾é©»ä¿¡ä½¿çš„è§’è‰²ï¼Œä¸€æ–¹é¢å°†å­é›†ç¾¤çš„ä¿¡æ¯ä¸ŠæŠ¥ç»™<code>clusternet-hub</code>ä»¥è¿›è¡Œè§‚æµ‹ï¼Œå¦ä¸€æ–¹é¢å°†ä»<code>clusternet-hub</code>ä¼ é€æ¥çš„æŒ‡ä»¤ä¸‹å‘ç»™å­é›†ç¾¤ä»¥è¿›è¡Œæ§åˆ¶ã€‚é‰´æƒæ¨¡å¼ä¸Š Clusternet å¤ç”¨äº†å­é›†ç¾¤çš„é‰´æƒèƒ½åŠ›ï¼Œé€šè¿‡ K8s çš„ user impersonation<sup>[6]</sup> èƒ½åŠ›å°†è®¤è¯ä¿¡æ¯å‘é€åˆ°<code>clusternet-agent</code>æ¨¡æ‹Ÿå¯¹åº”ç”¨æˆ·è¿›è¡Œæ“ä½œæ§åˆ¶ã€‚</p><img alt=clusternetæ¶æ„ width=100% src=clusternet-arch.png><h2 id=åŠ å…¥æˆ‘ä»¬>åŠ å…¥æˆ‘ä»¬</h2><p>åœ¨å¤§å®¶çš„å…±åŒåŠªåŠ›ä¸‹ TKEStack å·²ç»æ¼”è¿›åˆ° v1.8.x ç‰ˆæœ¬ï¼Œå…¶ä¸­åŒ…æ‹¬äº† containerd æ”¯æŒã€cilium æ”¯æŒã€é›†ç¾¤åº”ç”¨å®šä¹‰ç­‰è¯¸å¤šæ–°åŠŸèƒ½ï¼Œæ¬¢è¿å¤§å®¶åˆ° <a href=https://github.com/tkestack/tke/releases>https://github.com/tkestack/tke/releases</a> ä¸‹è½½ä½“éªŒã€‚åŒæ—¶ v1.9.0 ç‰ˆæœ¬çš„å¼€å‘å·¥ä½œæ­£åœ¨ä¸»åˆ†æ”¯ä¸Šç«çƒ­è¿›è¡Œä¸­ï¼Œv1.9.0 ç‰ˆæœ¬ä¸­é™¤äº†æœ¬æ–‡ä»‹ç»çš„æ”¯æŒå¯¼å…¥åˆ†å¸ƒå¼äº‘ä¸­å¿ƒé›†ç¾¤å¤–ï¼Œæˆ‘ä»¬ä¼šå…¨é¢å‡çº§ TKEStack çš„å„ç§ä¾èµ–ï¼ŒåŒ…æ‹¬ golang ç‰ˆæœ¬ã€CI å·¥å…·ç‰ˆæœ¬ä»¥åŠ K8s api ç‰ˆæœ¬ç­‰ï¼Œæ­¤å¤–æˆ‘ä»¬è¿˜å°†åœ¨ TKEStack çš„è½»é‡åŒ–å‡è´Ÿä¸Šåšå‡ºåŠªåŠ›ï¼ŒåŒ…æ‹¬ç§»é™¤ TKE å‘è¡Œç‰ˆ<sup>[7]</sup>ä»¥å¤–çš„é›†ç¾¤ç‰ˆæœ¬ï¼Œåˆ å‡ä¸å¸¸ç”¨çš„ addon ç»„ä»¶ç­‰ã€‚å½“ä¸‹çš„ TKEStack æ­£æ˜¯éœ€è¦ä½ åŠ å…¥çš„æ—¶å€™ï¼Œæ¬¢è¿å¤§å®¶åˆ°é¡¹ç›®ä»“åº“ <a href=https://github.com/tkestack/tke>https://github.com/tkestack/tke</a> è´¡çŒ®ä¸€ä»½åŠ›é‡ï¼</p><h2 id=å‚è€ƒèµ„æ–™>å‚è€ƒèµ„æ–™</h2><p>[1] TKEStack é›†ç¾¤ç®¡ç† [https://tkestack.github.io/docs/user-guide/platform-console/cluster-mgmt.html]</p><p>[2] è…¾è®¯äº‘åŸç”Ÿåˆ†å¸ƒå¼äº‘ä¸­å¿ƒ [https://cloud.tencent.com/document/product/1517/63246]</p><p>[3] Kind, running local Kubernetes clusters using Docker [https://kind.sigs.k8s.io/]</p><p>[4] Clusternet [https://github.com/clusternet/clusternet]</p><p>[5] Kubernetes API Aggregation Layer [https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/apiserver-aggregation/]</p><p>[6] User impersonation [https://kubernetes.io/docs/reference/access-authn-authz/authentication/#user-impersonation]</p><p>[7] TKE Kubernetes Distro [https://github.com/tkestack/tke-k8s-distro]</p><ul class="list-unstyled d-flex justify-content-between align-items-center mb-0 pt-5"><li><a href=/web/zh/blog/2021/12/18/tkestack-auth/ aria-label="ä¸Šä¸€é¡µ - TKEStack ä¸­çš„è®¤è¯ä¸é‰´æƒ" class="btn btn-primary"><span class=mr-1>â†</span> ä¸Šä¸€é¡µ</a></li><a href=/web/zh/blog/2022/01/04/tkestack-ldap/ aria-label="ä¸‹ä¸€é¡µ - TKEStack é›†æˆLDAP" class="btn btn-primary">ä¸‹ä¸€é¡µ <span class=ml-1>â†’</span></a></li></ul></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/tkestack/tke aria-label=GitHub><i class="fab fa-github"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2022 The TKEStack Authors All Rights Reserved</small></div></div></div></footer></div><script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js integrity=sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF crossorigin=anonymous></script><script src=/web/js/main.min.1911ee3ae98d7d6df3807cd00d8e31ae7d1c08ee0f0bb587529b0483da4e5464.js integrity="sha256-GRHuOumNfW3zgHzQDY4xrn0cCO4PC7WHUpsEg9pOVGQ=" crossorigin=anonymous></script></body></html>